---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogPost from './BlogPost.astro';

const allPosts = await Astro.glob('../pages/posts/*.md');

const uniqueTags = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())];

const { tag } = Astro.params;
const { posts } = Astro.props;

---
  <p>Posts tagged with {tag}</p>
  <ul>
    {allPosts.map((post) => post)}
  </ul>
  <ul>
    {uniqueTags.map((post) => post)}
  </ul>
